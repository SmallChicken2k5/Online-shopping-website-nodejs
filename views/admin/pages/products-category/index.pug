extends ../../layouts/default.pug
include ../../mixins/filterStatus.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/formChangeMulti.pug
include ../../mixins/alert.pug
include ../../mixins/table-tree.pug
include ../../mixins/error404.pug
block main
  +showAlertSuccess(5000)
  +showAlertError(5000)
  if (role.permissions.includes('products-category_view'))
    h1(class="mb-4") Danh mục sản phẩm
    
    .card.mb-3 
      .card-header Bộ lọc và tìm kiếm
      .card-body 
        .row 
          .col-6
            .btn-group
              +filterStatus(buttonStatus)
          .col-6 
            +search(keyword)

    .card.mb-3
      .card-header Sắp xếp
      .card-body
        .row
          .col-4
            div(sort)
              select(
                class="form-control"
                name="sort"
                sort-select
              )

                option(value="position-desc") Vị trí giảm dần
                option(value="position-asc") Vị trí tăng dần
                option(value="title-asc") Tiêu đề A - Z
                option(value="title-desc") Tiêu đề Z - A

              button(
                class="btn btn-danger mt-2"
                sort-clear
              ) clear
    .card.mb-3
      .card-header Danh sách
      .card-body
        .row.align-items-center
          .col
            +formChangeMulti(`${prefixAdmin}/products-category/change-multi?_method=PATCH`)
          if (role.permissions.includes('products-category_create'))
            .col-auto.text-end
              a(
                href=`${prefixAdmin}/products-category/create`
                class="btn btn-outline-success"
              ) + Thêm mới
              br
              br

        table(
          class="table table-hover table-sm"
          checkbox-multi
        )
          thead
            tr
              th 
                input(
                  type='checkbox'
                  class='form-check-input'
                  name="checkAll"
                )
              th STT
              th Hình ảnh
              th Tiêu đề
              th Vị trí
              th Trạng thái
              th Hành động

          tbody
            +table-tree(records)  
    form(
      id='form-change-status'
      action=``
      method='POST'
      data-path=`${prefixAdmin}/products-category/change-status`
    )
    form(
      id='form-delete-product'
      action=``
      method='POST'
      data-path=`${prefixAdmin}/products-category/delete-productCategory`
    )
  else 
    +error404()
  script(src="/admin/js/product.js") 