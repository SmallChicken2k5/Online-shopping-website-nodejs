mixin product-item(product)
    .col-md-4.mb-4
        .card.h-100.border-0.shadow-sm
            // Image + badges
            .position-relative.bg-light
                if product.discountPercentage
                    span.badge.bg-danger.position-absolute.top-0.start-0.m-2
                        i.bi.bi-tag-fill.me-1
                        | -#{product.discountPercentage}%
                if (product.featured === '1')
                    span.badge.bg-success.position-absolute.top-0.end-0.m-2
                        i.bi.bi-star-fill.me-1
                        | Nổi bật
                img.card-img-top.p-3(
                    src=product.thumbnail,
                    alt=product.title,
                    style="height:220px; object-fit:contain;"
                )

            .card-body
                h5.card-title.mb-2.text-truncate
                    a.stretched-link.text-decoration-none.text-body(href='/products/detail/' + product.slug)
                        | #{product.title}

                .d-flex.justify-content-between.align-items-center.mb-2
                    .d-flex.align-items-baseline.gap-2
                        span.fw-semibold
                            i.bi.bi-currency-dollar.me-1
                            | Giá:
                        if product.discountPercentage
                            span.text-muted.text-decoration-line-through #{product.price + '$'}
                            span.text-danger.fw-bold #{product.discountedPrice + '$'}
                        else
                            span.text-primary.fw-bold #{product.price + '$'}
                    .d-flex.align-items-center
                        i.bi.bi-box-seam.me-1
                        span.fw-semibold Kho:
                        span.ms-1.text-secondary= product.stock

            .card-footer.bg-transparent.border-0.pt-0
                .d-flex.justify-content-between
                    a.btn.btn-sm.btn-outline-secondary(href='/products/detail/' + product.slug)
                        i.bi.bi-eye.me-1
                        | Xem chi tiết
                    if product.stock > 0
                        button.btn.btn-sm.btn-primary(
                            type='button',
                            data-role='add-to-cart',
                            data-slug=product.slug
                        )
                            i.bi.bi-cart-plus.me-1
                            | Thêm vào giỏ
                    else
                        button.btn.btn-sm.btn-secondary.disabled(type='button', disabled)
                            i.bi.bi-x-circle.me-1
                            | Hết hàng